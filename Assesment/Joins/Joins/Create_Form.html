<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
   
    <style>

        label {
            display: inline-block;
            width: 175px;
            
        }

        input {
            height: 20px;
        }

        .mandatory {
            color: red;
            font-size: 18px;
        }

        #mainCaptcha {
            
            user-select: none; 
        }
    </style>
   
    <script>

        function validate() {
            var count1 = 1;
            var count2 = 0;
            var form = document.forms[0];
            var name = form.name;
            if (name.value.length == 0) {
                alert("please enter your Name");
                name.focus();
                return false;
            }

            var email = form.email;
            if (email.value.length == 0) {
                alert("Please enter your email id");
                email.focus();
                return false;
            }
            else if (email.value.length > 0) {

                var x = email.value;
                var atposition = x.indexOf("@");
                var dotposition = x.lastIndexOf(".");
                if (atposition < 1 || dotposition < atposition + 2 || dotposition + 2 >= x.length) {
                    alert("Please enter a valid e-mail address");
                    email.focus();
                    return false;
                }
            }

            var password = form.password;
            if (password.value.length == 0) {
                alert("Please enter a password");
                password.focus();
                return false;
            }
            if (password.value.length < 8) {
                alert("password length should be min 8 characters");
                password.focus();
                return false;
            }
            if (password.value.length >= 8)
            {
                var x = password.value;
                var total1 = x.length;

                var res = x.split("");
                //alert(total1);
                for (i = 0; i < total1; i++) {
                    for (j = 'A'; j <= 'E'; j++) {
                        if (res[i] == j) {
                            count1 = count1 + 1;
                        }
                    }
                }
                if (count1 < 2) {
                    alert("password should contain atleast 2 capital letters");
                    return false;
                }

                
                for (i = 0; i < total1; i++)
                {
                   
                    var format = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/;
                    if (format.test(res[i]))
                    {                      
                        count2 = count2 + 1;                       
                    }                                      
                }              
                if (count2 < 3)
                {
                    alert("password should contain alteset 3 special characters")
                }

            }

            var mobileNumber = form.mobileNumber;
            if (mobileNumber.value.length == 0) {
                alert("Please enter your Mobile Number");
                mobileNumber.focus();
                return false;
            }
            if (mobileNumber.value.length > 10)
            {
                alert("Please enter valid Mobile Number");
                mobileNumber.focus();
                return false;
            }
            if (isNaN(mobileNumber.value)) {
                alert("Mobile number should not contain alphabet or any special characters.Only digits are allowed");
                mobileNumber.focus();
                return false;
            }

            var address = form.address;
            if (address.value.length == 0) {
                alert("please enter your address")
            }
            if (address.value.length < 10) {
                alert("please enter your full address ");
            }
            return ValidCaptcha();
            
            return true;
        }
    </script>
    <script type="text/javascript">
        function Captcha()
        {
            var data = new Array('A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
                'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
                1, 2, 3, 4, 5, 6, 7, 8, 9, 0);
            
            for (i = 0; i < 6; i++)
            {
                var a = data[Math.floor(Math.random() * data.length)];
                var b = data[Math.floor(Math.random() * data.length)];
                var c = data[Math.floor(Math.random() * data.length)];
                var d = data[Math.floor(Math.random() * data.length)];
                var e = data[Math.floor(Math.random() * data.length)];
                var f = data[Math.floor(Math.random() * data.length)];
                var g = data[Math.floor(Math.random() * data.length)];
            }
            var code = a + ' ' + b + ' ' + ' ' + c + ' ' + d + ' ' + e + ' ' + f + ' ' + g;
            document.getElementById("mainCaptcha").value = code
        }
        function ValidCaptcha()
        {
            var string1 = removeSpaces(document.getElementById('mainCaptcha').value);
            var string2 = removeSpaces(document.getElementById('txtInput').value);
            if (string1 == string2)
            {              
                return true;
            }
            else
            {
                alert("captch not matched")
                return false;
            }
        }
        function removeSpaces(string)
        {
            return string.split(' ').join('');
        }
        
       
    </script>

</head>

<body style="background-color:gainsboro" onload="Captcha()">


    <form action="Success.html" method="get">

        <h1>Fill Up The Form</h1>
        <p style="color:red">(Fields marked with asterisk (*) are mandatory to fill)</p>
        <label>Name:</label><input id="idname" type="text" name="name" size="20">&nbsp;<sup class="mandatory">*</sup><br><br>
        <label>Email:</label><input type="text" name="email" size="30">&nbsp;<sup class="mandatory">*</sup><br><br>
        <label>Create a Password:</label><input type="text" name="password"> &nbsp;<sup class="mandatory">*</sup><br /><br />
        <label>Mobile Number:</label><input type="text" name="mobileNumber"> &nbsp;<sup class="mandatory">*</sup><br /><br />
        <label>Address:</label>&nbsp;<sup class="mandatory">*</sup><br />
        &nbsp;<textarea style="float:initial" cols="20" rows="10" name="address"></textarea><br /><br />
        <label>Enter the captcha shown:</label><input type="text" id="txtInput" />&nbsp;<sup class="mandatory">*</sup><input type="text" disabled="disabled" id="mainCaptcha" />

        <input type="button" id="refresh" value="Refresh" onclick="Captcha();" /><br />

        <button onclick="return validate()">Register</button>

       

    </form>
   
</body>

</html>